"use strict";var E=Object.defineProperty;var le=Object.getOwnPropertyDescriptor;var me=Object.getOwnPropertyNames;var he=Object.prototype.hasOwnProperty;var I=(e,t)=>()=>(t||e((t={exports:{}}).exports,t),t.exports),ye=(e,t)=>{for(var r in t)E(e,r,{get:t[r],enumerable:!0})},de=(e,t,r,n)=>{if(t&&typeof t=="object"||typeof t=="function")for(let o of me(t))!he.call(e,o)&&o!==r&&E(e,o,{get:()=>t[o],enumerable:!(n=le(t,o))||n.enumerable});return e};var ge=e=>de(E({},"__esModule",{value:!0}),e);var W=I((Ve,L)=>{"use strict";var P,i,B={'"':'"',"\\":"\\","/":"/",b:"\b",f:"\f",n:`
`,r:"\r",t:"	"},k;function b(e){throw{name:"SyntaxError",message:e,at:P,text:k}}function a(e){return e&&e!==i&&b("Expected '"+e+"' instead of '"+i+"'"),i=k.charAt(P),P+=1,i}function H(){var e,t="";for(i==="-"&&(t="-",a("-"));i>="0"&&i<="9";)t+=i,a();if(i===".")for(t+=".";a()&&i>="0"&&i<="9";)t+=i;if(i==="e"||i==="E")for(t+=i,a(),(i==="-"||i==="+")&&(t+=i,a());i>="0"&&i<="9";)t+=i,a();return e=Number(t),isFinite(e)||b("Bad number"),e}function K(){var e,t,r="",n;if(i==='"')for(;a();){if(i==='"')return a(),r;if(i==="\\")if(a(),i==="u"){for(n=0,t=0;t<4&&(e=parseInt(a(),16),!!isFinite(e));t+=1)n=n*16+e;r+=String.fromCharCode(n)}else if(typeof B[i]=="string")r+=B[i];else break;else r+=i}b("Bad string")}function d(){for(;i&&i<=" ";)a()}function be(){switch(i){case"t":return a("t"),a("r"),a("u"),a("e"),!0;case"f":return a("f"),a("a"),a("l"),a("s"),a("e"),!1;case"n":return a("n"),a("u"),a("l"),a("l"),null;default:b("Unexpected '"+i+"'")}}function Oe(){var e=[];if(i==="["){if(a("["),d(),i==="]")return a("]"),e;for(;i;){if(e.push(x()),d(),i==="]")return a("]"),e;a(","),d()}}b("Bad array")}function ve(){var e,t={};if(i==="{"){if(a("{"),d(),i==="}")return a("}"),t;for(;i;){if(e=K(),d(),a(":"),Object.prototype.hasOwnProperty.call(t,e)&&b('Duplicate key "'+e+'"'),t[e]=x(),d(),i==="}")return a("}"),t;a(","),d()}}b("Bad object")}function x(){switch(d(),i){case"{":return ve();case"[":return Oe();case'"':return K();case"-":return H();default:return i>="0"&&i<="9"?H():be()}}L.exports=function(e,t){var r;return k=e,P=0,i=" ",r=x(),d(),i&&b("Syntax error"),typeof t=="function"?function n(o,f){var p,u,s=o[f];if(s&&typeof s=="object")for(p in x)Object.prototype.hasOwnProperty.call(s,p)&&(u=n(s,p),typeof u>"u"?delete s[p]:s[p]=u);return t.call(o,f,s)}({"":r},""):r}});var z=I((qe,G)=>{"use strict";var D=/[\\"\x00-\x1f\x7f-\x9f\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,h,w,je={"\b":"\\b","	":"\\t","\n":"\\n","\f":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"},O;function V(e){return D.lastIndex=0,D.test(e)?'"'+e.replace(D,function(t){var r=je[t];return typeof r=="string"?r:"\\u"+("0000"+t.charCodeAt(0).toString(16)).slice(-4)})+'"':'"'+e+'"'}function R(e,t){var r,n,o,f,p=h,u,s=t[e];switch(s&&typeof s=="object"&&typeof s.toJSON=="function"&&(s=s.toJSON(e)),typeof O=="function"&&(s=O.call(t,e,s)),typeof s){case"string":return V(s);case"number":return isFinite(s)?String(s):"null";case"boolean":case"null":return String(s);case"object":if(!s)return"null";if(h+=w,u=[],Object.prototype.toString.apply(s)==="[object Array]"){for(f=s.length,r=0;r<f;r+=1)u[r]=R(r,s)||"null";return o=u.length===0?"[]":h?`[
`+h+u.join(`,
`+h)+`
`+p+"]":"["+u.join(",")+"]",h=p,o}if(O&&typeof O=="object")for(f=O.length,r=0;r<f;r+=1)n=O[r],typeof n=="string"&&(o=R(n,s),o&&u.push(V(n)+(h?": ":":")+o));else for(n in s)Object.prototype.hasOwnProperty.call(s,n)&&(o=R(n,s),o&&u.push(V(n)+(h?": ":":")+o));return o=u.length===0?"{}":h?`{
`+h+u.join(`,
`+h)+`
`+p+"}":"{"+u.join(",")+"}",h=p,o;default:}}G.exports=function(e,t,r){var n;if(h="",w="",typeof r=="number")for(n=0;n<r;n+=1)w+=" ";else typeof r=="string"&&(w=r);if(O=t,t&&typeof t!="function"&&(typeof t!="object"||typeof t.length!="number"))throw new Error("JSON.stringify");return R("",{"":e})}});var Y=I(q=>{"use strict";q.parse=W();q.stringify=z()});var X=I((Ce,Q)=>{"use strict";var _=typeof JSON<"u"?JSON:Y(),Se=Array.isArray||function(e){return{}.toString.call(e)==="[object Array]"},Ae=Object.keys||function(e){var t=Object.prototype.hasOwnProperty||function(){return!0},r=[];for(var n in e)t.call(e,n)&&r.push(n);return r};Q.exports=function(e,t){t||(t={}),typeof t=="function"&&(t={cmp:t});var r=t.space||"";typeof r=="number"&&(r=Array(r+1).join(" "));var n=typeof t.cycles=="boolean"?t.cycles:!1,o=t.replacer||function(u,s){return s},f=t.cmp&&function(u){return function(s){return function(l,c){var S={key:l,value:s[l]},j={key:c,value:s[c]};return u(S,j)}}}(t.cmp),p=[];return function u(s,l,c,S){var j=r?`
`+new Array(S+1).join(r):"",ue=r?": ":":";if(c&&c.toJSON&&typeof c.toJSON=="function"&&(c=c.toJSON()),c=o.call(s,l,c),c!==void 0){if(typeof c!="object"||c===null)return _.stringify(c);if(Se(c)){for(var A=[],g=0;g<c.length;g++){var fe=u(c,g,c[g],S+1)||_.stringify(null);A.push(j+r+fe)}return"["+A.join(",")+j+"]"}if(p.indexOf(c)!==-1){if(n)return _.stringify("__cycle__");throw new TypeError("Converting circular structure to JSON")}else p.push(c);for(var C=Ae(c).sort(f&&f(c)),A=[],g=0;g<C.length;g++){var l=C[g],M=u(c,l,c[l],S+1);if(!!M){var pe=_.stringify(l)+ue+M;A.push(j+r+pe)}}return p.splice(p.indexOf(c),1),"{"+A.join(",")+j+"}"}}({"":e},"",e,0)}});var _e={};ye(_e,{default:()=>Re});module.exports=ge(_e);var y=require("@stoplight/spectral-functions"),v=require("@stoplight/spectral-formats"),ce=require("@stoplight/spectral-rulesets");var $;(function(e){e.Simple="simple",e.Matrix="matrix",e.Label="label",e.Form="form",e.CommaDelimited="commaDelimited",e.SpaceDelimited="spaceDelimited",e.PipeDelimited="pipeDelimited",e.DeepObject="deepObject"})($||($={}));var m;(function(e){e[e.Error=0]="Error",e[e.Warning=1]="Warning",e[e.Information=2]="Information",e[e.Hint=3]="Hint"})(m||(m={}));var J;(function(e){e.Article="article",e.HttpService="http_service",e.HttpServer="http_server",e.HttpOperation="http_operation",e.Model="model",e.Generic="generic",e.Unknown="unknown",e.TableOfContents="table_of_contents",e.SpectralRuleset="spectral_ruleset",e.Styleguide="styleguide",e.Image="image"})(J||(J={}));var U;(function(e){e.Json="json",e.Markdown="markdown",e.Yaml="yaml",e.Javascript="javascript",e.Apng="apng",e.Avif="avif",e.Bmp="bmp",e.Gif="gif",e.Jpeg="jpeg",e.Png="png",e.Svg="svg",e.Webp="webp"})(U||(U={}));var T=e=>e.length===1?[]:[{message:"Potential misuse of security has been detected"}];var Z=X(),F=e=>{if(e==null)throw Error("All references should be dereferenced and non-empty");if("$ref"in e)throw Error("All references should be dereferenced by Spectral already");return e},N=(e,t)=>{if(e.length!==t.length)return!1;let r=e.map(o=>Z(o)),n=t.map(o=>Z(o));return r.filter(o=>n.includes(o)).length===r.length},ee=(e,t)=>{e!==null&&te(e,t,[])},te=(e,t,r)=>{e!==null&&Object.entries(e).forEach(([n,o])=>{let f=[...r];f.push(n),t(n,o,f),typeof o=="object"?te(o,t,f):t(n,o,f)})};var re=(e,t,r)=>{let n=[],o=r.document.data,f=o.components?.securitySchemes;if(!f)return[];let p=o.security?o.security:e.security;if(!p)return[];if(!e.parameters)return[];let u=e.parameters.map(s=>F(s).name);return p.flatMap(s=>Object.keys(s).map(l=>{let c=F(f[l]);c.type==="http"&&u.includes("Authorization")?n.push({message:"Authorization"}):c.type==="apiKey"&&u.includes(c.name)&&n.push({message:c.name})})),n};var ne=(e,t,r)=>{let n=[],o=r.document.data;return!o.security||!e.security?[]:(N(o.security,e.security)&&n.push({message:"Detected redundant security schemes."}),n)};var ie=(e,t,r)=>{let n=[],o=r.document.data,f=0,p=0;return ee(o,(u,s,l)=>{typeof s=="object"&&"type"in s&&s.type==="object"&&(l.includes("responses")||l.includes("schemas"))&&(f++,p+=s.additionalProperties?1:0)}),f>0&&p===0&&n.push({message:"Detected potential problem with object types"}),n},se=`No 'additionalProperties: true' detected throughout 
spec. Is your spec is 100% compliant with your production API? If yes 
(CONGRATS!), ignore this rule in .spectral.yaml and move on. If no, ignore this 
rule in .spectral.yaml and configure your konfig.yaml to intelligently attach 
'additionalProperties: true' to response bodies.`;var oe=e=>{let t=[];if(typeof e!="object"||e===null||!("type"in e)||!("example"in e))return[];let r=e.type;if(typeof r!="string")return[];let n=e.example;return t.push(...Ie(r,n)),t},Ie=(e,t)=>e==="string"&&typeof t=="string"?Pe(t):[];function Pe(e){return ae(e)?[{message:"Could be integer type based on example"}]:we(e)?[{message:"Could be number type based on example"}]:xe(e)?[{message:"Could be boolean type based on example"}]:[]}function xe(e){return e==="true"||e==="false"}function ae(e){return/^-?\d+$/.test(e)}function we(e){return!ae(e)&&!isNaN(parseFloat(e))}var Re={extends:ce.oas,aliases:{PathItem:["$.paths[*]"],OperationObject:["#PathItem[get,put,post,delete,options,head,patch,trace]"],ParameterSchemaObject:["#OperationObject.parameters.*.schema"],RequestSchemaObject:["#OperationObject.requestBody.content.*.schema"],ResponseSchemaObject:["#OperationObject.responses.*.content.*.schema"]},rules:{"operation-description":"off","operation-success-response":"off","info-contact":"off","no-http-basic":{description:"Consider a more secure alternative to HTTP Basic",message:"HTTP Basic is a pretty insecure way to pass credentials around, please consider an alternative.",given:"$.components.securitySchemes[*]",then:{field:"scheme",function:y.pattern,functionOptions:{notMatch:"basic"}},severity:m.Error},"hosts-https-only-oas2":{description:"ALL requests MUST go through `https` protocol only",type:"style",message:"Schemes MUST be https and no other protocol is allowed.",given:"$.schemes",then:{function:y.schema,functionOptions:{schema:{type:"array",items:{type:"string",const:"https"}}}},severity:m.Error,formats:[v.oas2]},"hosts-https-only-oas3":{description:"ALL requests MUST go through https:// protocol only",message:"Servers MUST be https and no other protocol is allowed.",given:"$.servers..url",then:{function:y.pattern,functionOptions:{match:"/^https:/"}},formats:[v.oas3],severity:m.Error},"no-file-extensions-in-paths":{description:"Paths must not include file extensions such as .json, .xml, .html and .txt",message:"Paths must not include file extensions such as .json, .xml, .html and .txt. Use the OpenAPI `content` keyword to tell consumers which Media Types are available.",given:"$.paths[*]~",then:{function:y.pattern,functionOptions:{notMatch:".(json|xml|html|txt)$"}},severity:m.Error},"adv-security-schemes-defined":{description:"All APIs MUST have a security scheme defined.",message:"This API definition does not have any security scheme defined.",given:"$..components",then:{field:"securitySchemes",function:y.truthy},formats:[v.oas3],severity:m.Error},"list-usage-of-security":{description:"List usage of security implies multiple possible security strategies which is uncommon",message:"Potential misuse of the security field. Only use list when you have multiple security strategies. (i.e. list vs map is significant https://swagger.io/docs/specification/authentication/)",given:["$.security","$.paths..security"],then:{function:T},formats:[v.oas3]},"duplicate-security-and-request-parameters":{description:"Duplicate security and request parameters will cause generated SDKs to have undesired behavior.",message:"Duplicate parameter '{{error}}' in request parameters and security schemes.",given:"#OperationObject",then:{function:re},formats:[v.oas3],severity:m.Error},"operation-operationId":{message:'Operation must have "operationId" for generated SDK method names.',given:"#OperationObject",then:{field:"operationId",function:y.truthy}},"redundant-security-schemes":{message:"Remove redundant security schemes from operation object.",given:"#OperationObject",then:{function:ne}},"no-additional-properties":{message:se,given:"#ResponseSchemaObject",then:{function:ie},severity:m.Error},"potential-data-type":{message:"{{error}}. Ensure your types are correct.",given:["#ResponseSchemaObject..","#RequestSchemaObject..","#ParameterSchemaObject.."],then:{function:oe},severity:m.Error},"limited-oas3_1-support":{message:"Konfig has limited support for OAS 3.1",given:"$.openapi",then:{function:y.pattern,functionOptions:{notMatch:"^3.1.\\d$"}},severity:m.Error},"multiple-tags":{message:"Having more than 1 tag is not possible for the TypeScript SDK. Consider limiting to 1 tag.",given:"#OperationObject.tags",then:{function:y.length,functionOptions:{min:1,max:1}},severity:m.Warning}}};0&&(module.exports={});
module.exports = module.exports.default;
//# sourceMappingURL=ruleset.js.map